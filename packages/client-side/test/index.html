<!DOCTYPE html>
<html>
  <head>
    <title>@requestnetwork/client-side Test Page</title>
    <script src="..\dist\requestnetwork.min.js"></script>
    <script src="..\..\ethereum-private-key-signature-provider\dist\ethereum-private-key-signature-provider.min.js"></script>
  </head>
  <body>
    <script>
      // TODO: remove console.log and use EthereumPrivateKeySignatureProvider
      console.log(EthereumPrivateKeySignatureProvider);

      function getMockData() {
        return {
          signatureInfo: {
            method: RequestNetwork.Types.Signature.REQUEST_SIGNATURE_METHOD.ECDSA,
            privateKey: '0xc87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3',
          },

          requestCreationHash: {
            currency: RequestNetwork.Types.RequestLogic.REQUEST_LOGIC_CURRENCY.ETH,
            expectedAmount: '100000000000',
            payee: {
              type: RequestNetwork.Types.Identity.REQUEST_IDENTITY_TYPE.ETHEREUM_ADDRESS,
              value: '0x627306090abab3a6e1400e9345bc60c78a8bef57',
            },
            payer: {
              type: RequestNetwork.Types.Identity.REQUEST_IDENTITY_TYPE.ETHEREUM_ADDRESS,
              value: '0x740fc87Bd3f41d07d23A01DEc90623eBC5fed9D6',
            },
          },

          topics: [
            '0x627306090abab3a6e1400e9345bc60c78a8bef57',
            '0x740fc87Bd3f41d07d23A01DEc90623eBC5fed9D6',
          ],
        };
      }

      (async () => {
        // Initialize the library in local test mode
        const requestNetwork = new RequestNetwork.RequestNetwork({ useMockStorage: true });

        const { requestCreationHash, signatureInfo, topics } = getMockData();

        // Create a request
        const { request } = await requestNetwork.createRequest(
          requestCreationHash,
          signatureInfo,
          topics,
        );

        // Retrieve the previously created request from its ID
        const requestFromId = requestNetwork.fromRequestId(request.requestId);

        // Get the data of the request
        const {
          result: { request: requestData },
        } = await requestFromId.getData();

        console.log(requestData);
      })();
    </script>
  </body>
</html>
